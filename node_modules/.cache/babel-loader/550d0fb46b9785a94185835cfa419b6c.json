{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jeffhall/Desktop/Software Engineering Career Track/Section_IV/Exercises/Unit_43_Deployment_folder/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jeffhall/Desktop/Software Engineering Career Track/Section_IV/Exercises/Unit_43_Deployment_folder/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jeffhall/Desktop/Software Engineering Career Track/Section_IV/Exercises/Unit_43_Deployment_folder/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{useHistory}from'react-router-dom';var useLogin=function useLogin(JoblyApi){var history=useHistory();var _useState=useState(),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e,formData,setShowMessage){var respToken;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;e.preventDefault();_context.next=4;return JoblyApi.login(formData);case 4:respToken=_context.sent;JoblyApi.token=respToken;setToken(respToken);history.push('/');_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);setShowMessage('Invalid username/password');case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function handleLogin(_x,_x2,_x3){return _ref.apply(this,arguments);};}();return[token,setToken,handleLogin];};export default useLogin;","map":{"version":3,"sources":["/Users/jeffhall/Desktop/Software Engineering Career Track/Section_IV/Exercises/Unit_43_Deployment_folder/frontend/src/hooks/useLogin.js"],"names":["useState","useHistory","useLogin","JoblyApi","history","token","setToken","handleLogin","e","formData","setShowMessage","preventDefault","login","respToken","push"],"mappings":"ykBAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,QAAD,CAAc,CAC7B,GAAMC,CAAAA,OAAO,CAAGH,UAAU,EAA1B,CACA,cAA0BD,QAAQ,EAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,WAAW,0FAAG,iBAAOC,CAAP,CAAUC,QAAV,CAAoBC,cAApB,gJAEhBF,CAAC,CAACG,cAAF,GAFgB,sBAGQR,CAAAA,QAAQ,CAACS,KAAT,CAAeH,QAAf,CAHR,QAGVI,SAHU,eAIhBV,QAAQ,CAACE,KAAT,CAAiBQ,SAAjB,CACAP,QAAQ,CAACO,SAAD,CAAR,CACAT,OAAO,CAACU,IAAR,CAAa,GAAb,EANgB,iFAShBJ,cAAc,CACZ,2BADY,CAAd,CATgB,qEAAH,kBAAXH,CAAAA,WAAW,oDAAjB,CAeA,MAAO,CAACF,KAAD,CAAQC,QAAR,CAAkBC,WAAlB,CAAP,CACD,CAnBD,CAqBA,cAAeL,CAAAA,QAAf","sourcesContent":["import { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nconst useLogin = (JoblyApi) => {\n  const history = useHistory();\n  const [token, setToken] = useState();\n  const handleLogin = async (e, formData, setShowMessage) => {\n    try {\n      e.preventDefault();\n      const respToken = await JoblyApi.login(formData);\n      JoblyApi.token = respToken;\n      setToken(respToken);\n      history.push('/')\n    }\n    catch(err) {\n      setShowMessage(\n        'Invalid username/password'\n      )\n    }\n  };\n\n  return [token, setToken, handleLogin];\n};\n\nexport default useLogin;"]},"metadata":{},"sourceType":"module"}