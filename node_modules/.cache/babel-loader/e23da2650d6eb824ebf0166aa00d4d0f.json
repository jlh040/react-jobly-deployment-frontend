{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jeffhall/Desktop/Software Engineering Career Track/Section_IV/Exercises/Unit_43_Deployment_folder/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jeffhall/Desktop/Software Engineering Career Track/Section_IV/Exercises/Unit_43_Deployment_folder/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jeffhall/Desktop/Software Engineering Career Track/Section_IV/Exercises/Unit_43_Deployment_folder/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jeffhall/Desktop/Software Engineering Career Track/Section_IV/Exercises/Unit_43_Deployment_folder/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import axios from\"axios\";import jwt from\"jsonwebtoken\";var BASE_URL=process.env.REACT_APP_BASE_URL||\"http://localhost:3001\";/** API Class.\n *\n * Static class tying together methods used to get/send to the API.\n * There shouldn't be any frontend-specific stuff here, and there shouldn't\n * be any API-aware stuff elsewhere in the frontend.\n *\n */var JoblyApi=/*#__PURE__*/function(){function JoblyApi(){_classCallCheck(this,JoblyApi);}_createClass(JoblyApi,null,[{key:\"request\",value:// the token for interactive with the API will be stored here.\nfunction(){var _request=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(endpoint){var data,method,url,headers,params,message,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_args.length>1&&_args[1]!==undefined?_args[1]:{};method=_args.length>2&&_args[2]!==undefined?_args[2]:\"get\";console.debug(\"API Call:\",endpoint,data,method);//there are multiple ways to pass an authorization token, this is how you pass it in the header.\n//this has been provided to show you another way to pass the token. you are only expected to read this code for this project.\nurl=\"\".concat(BASE_URL,\"/\").concat(endpoint);headers={Authorization:\"Bearer \".concat(JoblyApi.token)};params=method===\"get\"?data:{};_context.prev=6;_context.next=9;return axios({url:url,method:method,data:data,params:params,headers:headers});case 9:return _context.abrupt(\"return\",_context.sent.data);case 12:_context.prev=12;_context.t0=_context[\"catch\"](6);console.error(\"API Error:\",_context.t0.response);message=_context.t0.response.data.error.message;throw Array.isArray(message)?message:[message];case 17:case\"end\":return _context.stop();}}},_callee,null,[[6,12]]);}));function request(_x){return _request.apply(this,arguments);}return request;}()// Individual API routes\n/** Get details on a company by handle. */},{key:\"getCompany\",value:function(){var _getCompany=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(handle){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.request(\"companies/\".concat(handle));case 2:res=_context2.sent;return _context2.abrupt(\"return\",res.company);case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function getCompany(_x2){return _getCompany.apply(this,arguments);}return getCompany;}()},{key:\"getAllCompanies\",value:function(){var _getAllCompanies=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.request('companies');case 2:res=_context3.sent;return _context3.abrupt(\"return\",res.companies);case 4:case\"end\":return _context3.stop();}}},_callee3,this);}));function getAllCompanies(){return _getAllCompanies.apply(this,arguments);}return getAllCompanies;}()},{key:\"searchForCompanies\",value:function(){var _searchForCompanies=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(name){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(name.trim().length===0)){_context4.next=4;break;}return _context4.abrupt(\"return\",this.getAllCompanies());case 4:_context4.next=6;return this.request(\"companies\",{name:name});case 6:res=_context4.sent;return _context4.abrupt(\"return\",res.companies);case 8:case\"end\":return _context4.stop();}}},_callee4,this);}));function searchForCompanies(_x3){return _searchForCompanies.apply(this,arguments);}return searchForCompanies;}()},{key:\"getAllJobs\",value:function(){var _getAllJobs=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.request('jobs');case 2:res=_context5.sent;return _context5.abrupt(\"return\",res.jobs);case 4:case\"end\":return _context5.stop();}}},_callee5,this);}));function getAllJobs(){return _getAllJobs.apply(this,arguments);}return getAllJobs;}()},{key:\"searchForJobs\",value:function(){var _searchForJobs=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(title){var res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(title.trim().length===0)){_context6.next=4;break;}return _context6.abrupt(\"return\",this.getAllJobs());case 4:_context6.next=6;return this.request(\"jobs\",{title:title});case 6:res=_context6.sent;return _context6.abrupt(\"return\",res.jobs);case 8:case\"end\":return _context6.stop();}}},_callee6,this);}));function searchForJobs(_x4){return _searchForJobs.apply(this,arguments);}return searchForJobs;}()},{key:\"signUp\",value:function(){var _signUp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(userData){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.request('auth/register',userData,'post');case 2:res=_context7.sent;return _context7.abrupt(\"return\",res.token);case 4:case\"end\":return _context7.stop();}}},_callee7,this);}));function signUp(_x5){return _signUp.apply(this,arguments);}return signUp;}()},{key:\"login\",value:function(){var _login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(userData){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.request('auth/token',userData,'post');case 2:res=_context8.sent;return _context8.abrupt(\"return\",res.token);case 4:case\"end\":return _context8.stop();}}},_callee8,this);}));function login(_x6){return _login.apply(this,arguments);}return login;}()},{key:\"getUser\",value:function(){var _getUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(token){var username,res;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:username=jwt.decode(token).username;_context9.next=3;return this.request(\"users/\".concat(username));case 3:res=_context9.sent;return _context9.abrupt(\"return\",res.user);case 5:case\"end\":return _context9.stop();}}},_callee9,this);}));function getUser(_x7){return _getUser.apply(this,arguments);}return getUser;}()},{key:\"updateUser\",value:function(){var _updateUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(username,userData){var user;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return this.request(\"users/\".concat(username),userData,'patch');case 2:_context10.next=4;return this.getUser(JoblyApi.token);case 4:user=_context10.sent;return _context10.abrupt(\"return\",user);case 6:case\"end\":return _context10.stop();}}},_callee10,this);}));function updateUser(_x8,_x9){return _updateUser.apply(this,arguments);}return updateUser;}()},{key:\"applyForJob\",value:function(){var _applyForJob=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(username,jobId){var user;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return this.request(\"users/\".concat(username,\"/jobs/\").concat(jobId),{},\"post\");case 2:_context11.next=4;return this.getUser(JoblyApi.token);case 4:user=_context11.sent;return _context11.abrupt(\"return\",user);case 6:case\"end\":return _context11.stop();}}},_callee11,this);}));function applyForJob(_x10,_x11){return _applyForJob.apply(this,arguments);}return applyForJob;}()}]);return JoblyApi;}();export default JoblyApi;","map":{"version":3,"sources":["/Users/jeffhall/Desktop/Software Engineering Career Track/Section_IV/Exercises/Unit_43_Deployment_folder/frontend/src/api.js"],"names":["axios","jwt","BASE_URL","process","env","REACT_APP_BASE_URL","JoblyApi","endpoint","data","method","console","debug","url","headers","Authorization","token","params","error","response","message","Array","isArray","handle","request","res","company","companies","name","trim","length","getAllCompanies","jobs","title","getAllJobs","userData","username","decode","user","getUser","jobId"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport jwt from \"jsonwebtoken\";\n\nconst BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:3001\";\n\n/** API Class.\n *\n * Static class tying together methods used to get/send to the API.\n * There shouldn't be any frontend-specific stuff here, and there shouldn't\n * be any API-aware stuff elsewhere in the frontend.\n *\n */\n\nclass JoblyApi {\n  // the token for interactive with the API will be stored here.\n  static token;\n\n  static async request(endpoint, data = {}, method = \"get\") {\n    console.debug(\"API Call:\", endpoint, data, method);\n\n    //there are multiple ways to pass an authorization token, this is how you pass it in the header.\n    //this has been provided to show you another way to pass the token. you are only expected to read this code for this project.\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = { Authorization: `Bearer ${JoblyApi.token}` };\n    const params = (method === \"get\")\n        ? data\n        : {};\n\n    try {\n      return (await axios({ url, method, data, params, headers })).data;\n    } catch (err) {\n      console.error(\"API Error:\", err.response);\n      let message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  }\n\n  // Individual API routes\n\n  /** Get details on a company by handle. */\n\n  static async getCompany(handle) {\n    let res = await this.request(`companies/${handle}`);\n    return res.company;\n  }\n\n  static async getAllCompanies() {\n    let res = await this.request('companies');\n    return res.companies;\n  }\n\n  static async searchForCompanies(name) {\n    if (name.trim().length === 0) {\n      return this.getAllCompanies();\n    }\n    else {\n      let res = await this.request(`companies`, { name })\n      return res.companies;\n    }\n  }\n\n  static async getAllJobs() {\n    let res = await this.request('jobs');\n    return res.jobs;\n  }\n\n  static async searchForJobs(title) {\n    if (title.trim().length === 0) {\n      return this.getAllJobs();\n    }\n    else {\n      let res = await this.request(`jobs`, { title })\n      return res.jobs;\n    }\n  }\n\n  static async signUp(userData) {\n    const res = await this.request('auth/register', userData, 'post');\n    return res.token;\n  }\n\n  static async login(userData) {\n    const res = await this.request('auth/token', userData, 'post');\n    return res.token;\n  }\n\n  static async getUser(token) {\n    let username = jwt.decode(token).username;\n    let res = await this.request(`users/${username}`);\n    return res.user;\n  }\n\n  static async updateUser(username, userData) {\n    await this.request(`users/${username}`, userData, 'patch');\n    let user = await this.getUser(JoblyApi.token);\n    return user;\n  }\n\n  static async applyForJob(username, jobId) {\n    await this.request(`users/${username}/jobs/${jobId}`, {}, \"post\");\n    let user = await this.getUser(JoblyApi.token);\n    return user;\n  }\n  \n}\n\nexport default JoblyApi;\n"]},"metadata":{},"sourceType":"module"}